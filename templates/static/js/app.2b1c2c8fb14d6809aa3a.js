webpackJsonp([1],{"4aa7":function(t,e){},"F+aw":function(t,e){},HL2Y:function(t,e){},N4C6:function(t,e){},NHnr:function(t,e,s){"use strict";function a(t){s("xPla")}function n(t){s("biDQ")}function o(t){s("N4C6")}function i(t){s("sL98")}function r(t){s("TjtT")}function u(t){s("WWwO")}function p(t){s("g4oD")}function c(t){s("pVY+")}function l(t){s("l3D2")}function d(t){s("TNXy")}function m(t){s("iMzD")}function v(t){s("HL2Y")}function h(t){s("rYRr")}function f(t){s("gNUi")}function _(t){s("lULF")}function g(t){s("vX+Y")}function C(t){s("x5AP")}function b(t){s("O8b8")}function w(t){s("F+aw")}function y(t){s("4aa7")}Object.defineProperty(e,"__esModule",{value:!0});var $=s("mvHQ"),S=s.n($),k=s("7+uW"),F={name:"app",mounted:function(){if(localStorage.getItem("t")){var t=localStorage.getItem("t"),e=localStorage.getItem("u");e=JSON.parse(e),this.$store.state.jwt=t,this.$store.state.user=e,this.$store.dispatch("inspectToken")}else localStorage.removeItem("t"),localStorage.removeItem("u"),this.$store.dispatch("logout")}},x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("header",[s("Nav")],1),t._v(" "),s("main",[s("div",{staticClass:"router-container container-fluid"},[s("router-view")],1)]),t._v(" "),s("footer",[s("Footer")],1),t._v(" "),s("v-dialog")],1)},U=[],V={render:x,staticRenderFns:U},P=V,T=s("VU/8"),E=a,N=T(F,P,!1,E,null,null),L=N.exports,j=s("mtWM"),R=s.n(j),A={data:function(){return{user:"NO USER",signup:{username:"",first_name:"",last_name:"",email:"",password:""},login:{username:"",password:""}}},methods:{onSignupSubmit:function(){var t=this;this.$modal.hide("signup"),R.a.post("/api/users/",this.signup).then(function(e){t.$toasted.show("You Are Now Signed Up!",{theme:"primary",position:"top-right",duration:3e3}),t.$store.dispatch("obtainToken",[e.data.username,t.signup.password]);var s="https://www.avatarapi.com/js.aspx?email="+e.data.email+"&size=200";R.a.get(s).then(function(s){var a=s.data.match(/(https?:\/\/[^\s']+)/g)?s.data.match(/(https?:\/\/[^\s']+)/g)[1]:null;a?R.a.put("/api/profile/"+e.data.profile.id+"/",{user:e.data.id,profile_img:a},{headers:{Authorization:"JWT "+t.$store.state.jwt}}):R.a.put("/api/profile/"+e.data.profile.id+"/",{user:e.data.id,profile_img:"http://www.everythingjustrocks.com/wp-content/uploads/default.png"},{headers:{Authorization:"JWT "+t.$store.state.jwt}})})}).catch(function(e){console.log(e.response),t.$toasted.error("Oops, something went wrong!",{theme:"primary",position:"top-right",duration:3e3}),"That username already exists, bro"===e.response.data.non_field_errors[0]&&t.$modal.show("dialog",{title:"Alert!",text:"That username already exists ðŸ˜¬",buttons:[{title:"OK",default:!0}]})})},onLoginSubmit:function(t){this.$store.dispatch("obtainToken",[this.login.username,this.login.password]),this.$modal.hide(t)},logout:function(){this.$store.dispatch("logout")},show:function(t){this.$modal.show(t)}}},D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.$store.state.user?t._e():s("p",[s("button",{staticClass:"header-button",on:{click:function(e){t.show("login")}}},[t._v("Login")]),t._v(" or\n    "),s("button",{staticClass:"header-button",on:{click:function(e){t.show("signup")}}},[t._v("Signup")])]),t._v(" "),t.$store.state.user?s("div",[s("button",{staticClass:"header-button",on:{click:t.logout}},[t._v("Logout")]),t._v(" |\n    "),s("router-link",{attrs:{to:{name:"Profile",params:{id:t.$store.state.user.id}}}},[s("p",{staticClass:"username"},[t._v(t._s(t.$store.state.user.username))])])],1):t._e(),t._v(" "),s("modal",{attrs:{name:"login"}},[s("div",{staticClass:"row-fluid"},[s("div",{staticClass:"col s6"},[s("div",{staticClass:"main-modal"},[s("form",{on:{submit:function(e){e.preventDefault(),t.onLoginSubmit("login")}}},[s("div",{staticClass:"modal-content"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.login.username,expression:"login['username']"}],attrs:{type:"text",placeholder:"Username"},domProps:{value:t.login.username},on:{input:function(e){e.target.composing||t.$set(t.login,"username",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.login.password,expression:"login['password']"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:t.login.password},on:{input:function(e){e.target.composing||t.$set(t.login,"password",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"yellow-btn btn-flat",attrs:{type:"submit"}},[t._v("Login")])])])])]),t._v(" "),s("div",{staticClass:"col s6 login-img-cont"},[s("img",{attrs:{src:"/static/img/login.jpeg"}})])])]),t._v(" "),s("modal",{attrs:{name:"signup",height:"auto",scrollable:!0,adaptive:!0}},[s("div",{staticClass:"row-fluid"},[s("div",{staticClass:"col s6"},[s("div",{staticClass:"main-modal"},[s("form",{on:{submit:function(e){e.preventDefault(),t.onSignupSubmit("signup")}}},[s("div",{staticClass:"modal-content"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.signup.first_name,expression:"signup['first_name']"}],attrs:{type:"text",name:"first-name",placeholder:"First Name"},domProps:{value:t.signup.first_name},on:{input:function(e){e.target.composing||t.$set(t.signup,"first_name",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.signup.last_name,expression:"signup['last_name']"}],attrs:{type:"text",name:"last-name",placeholder:"Last Name"},domProps:{value:t.signup.last_name},on:{input:function(e){e.target.composing||t.$set(t.signup,"last_name",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.signup.username,expression:"signup['username']"}],attrs:{type:"text",name:"username",placeholder:"Username"},domProps:{value:t.signup.username},on:{input:function(e){e.target.composing||t.$set(t.signup,"username",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.signup.email,expression:"signup['email']"}],attrs:{type:"text",name:"email",placeholder:"Email"},domProps:{value:t.signup.email},on:{input:function(e){e.target.composing||t.$set(t.signup,"email",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.signup.password,expression:"signup['password']"}],attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:t.signup.password},on:{input:function(e){e.target.composing||t.$set(t.signup,"password",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"yellow-btn btn-flat",attrs:{type:"submit"}},[t._v("Sign Up")])])])])]),t._v(" "),s("div",{staticClass:"col s6 signup-img-cont"},[s("img",{attrs:{src:"/static/img/signup.jpeg"}})])])])],1)},O=[],Y={render:D,staticRenderFns:O},I=Y,W=s("VU/8"),J=n,z=W(A,I,!1,J,"data-v-6d1448a8",null),H=z.exports,B={data:function(){return{data:"NO DATA"}}},M=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},K=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-cont"},[s("input",{attrs:{type:"text",placeholder:"search"}})])}],X={render:M,staticRenderFns:K},q=X,Q=s("VU/8"),Z=o,G=Q(B,q,!1,Z,"data-v-3a76b20c",null),tt=G.exports,et={data:function(){return{category:"",user:"NO USER",cloudinary:{uploadPreset:"urj196d3",apiKey:Object({NODE_ENV:"production"}).Cloudinary_API_KEY,cloudName:"https://api.cloudinary.com/v1_1/dpa63jimp/upload"},thumbs:[]}},methods:{onSubmit:function(){var t=this;this.$modal.hide("post");var e=new FormData,s=document.getElementById("file");e.append("file",s.files[0]),e.append("upload_preset",this.cloudinary.uploadPreset),e.append("tags","gs-vue,gs-vue-uploaded"),R.a.post(this.cloudinary.cloudName,e).then(function(e){t.thumbs.unshift({url:e.data.secure_url}),t.postSnap(e.data.secure_url,t.category)})},postSnap:function(t,e){var s=this;R.a.post("/api/snaps/",{user:this.$store.state.user.id,cloudinary_url:t,category:e},{headers:{Authorization:"JWT "+this.$store.state.jwt}}).then(function(t){s.category="",s.$toasted.success("Your post has been added!",{theme:"primary",position:"top-right",duration:3e3})})},show:function(){this.$modal.show("post")}}},st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.$store.state.user?s("p",[s("button",{staticClass:"header-button",on:{click:t.show}},[t._v("Post")])]):t._e(),t._v(" "),s("modal",{attrs:{name:"post"}},[s("div",{staticClass:"main-modal"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("div",{staticClass:"modal-content"},[s("input",{attrs:{type:"file",id:"file",name:"file",placeholder:"image"}}),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.category,expression:"category"}],attrs:{id:"category"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.category=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",disabled:""}},[t._v("Category")]),t._v(" "),s("option",{attrs:{value:"animals"}},[t._v("Animals")]),t._v(" "),s("option",{attrs:{value:"cats"}},[t._v("Cats")]),t._v(" "),s("option",{attrs:{value:"dogs"}},[t._v("Dogs")]),t._v(" "),s("option",{attrs:{value:"sports"}},[t._v("Sports")]),t._v(" "),s("option",{attrs:{value:"hummus"}},[t._v("Hummus")])])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"yellow-btn btn-flat",attrs:{type:"submit"}},[t._v("Post")])])])])])],1)},at=[],nt={render:st,staticRenderFns:at},ot=nt,it=s("VU/8"),rt=i,ut=it(et,ot,!1,rt,"data-v-6de4d697",null),pt=ut.exports,ct={components:{Logged:H,Search:tt,Post:pt}},lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nav"},[s("nav",[s("div",{staticClass:"row"},[s("div",{staticClass:"col s4"},[s("Logged")],1),t._v(" "),s("div",{staticClass:"col s4"},[s("h5",[s("router-link",{attrs:{to:"/"}},[t._v("SnapCap")])],1)]),t._v(" "),s("div",{staticClass:"links col s4"},[s("Post",{staticClass:"post-btn"}),t._v(" "),t.$store.state.user?s("router-link",{attrs:{to:{name:"Profile",params:{id:t.$store.state.user.id}}}},[t._v("Profile")]):t._e()],1)])])])},dt=[],mt={render:lt,staticRenderFns:dt},vt=mt,ht=s("VU/8"),ft=r,_t=ht(ct,vt,!1,ft,"data-v-625cb131",null),gt=_t.exports,Ct=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},bt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"footer"},[s("p",[t._v("SnapCap "),s("a",{attrs:{href:"https://steamcdn-a.akamaihd.net/steam/apps/583470/header.jpg?t=1513035069"}},[t._v("Â©")]),t._v(" 2018. All Rights Reserved.")])])}],wt={render:Ct,staticRenderFns:bt},yt=wt,$t=s("VU/8"),St=u,kt=$t(null,yt,!1,St,"data-v-39b8e14a",null),Ft=kt.exports,xt=s("/ocq"),Ut={props:["votes","snap_id","cap_id","element_type"],data:function(){return{numOfVotes:0}},methods:{upVote:function(t){var e=this;"snap"===t&&R.a.post("/api/vote_picture/",{user:this.$store.state.user.id,picture:this.snap_id},{headers:{Authorization:"JWT "+this.$store.state.jwt}}).then(function(t){++e.numOfVotes,e.$toasted.success("Snap UpVoted!",{theme:"primary",position:"top-right",duration:3e3})}).catch(function(t){"The fields user, picture must make a unique set."===t.response.data.non_field_errors[0]&&e.$toasted.error("You are only allowed to vote once per post.",{theme:"primary",position:"top-right",duration:3e3}),"Signature has expired."===t.response.data.non_field_errors[0]&&e.$toasted.error("You need to be logged in to do that",{theme:"primary",position:"top-right",duration:3e3}),console.log(t.response)}),"cap"===t&&R.a.post("/api/vote_caption/",{user:this.$store.state.user.id,picture:this.snap_id,usercap:this.cap_id},{headers:{Authorization:"JWT "+this.$store.state.jwt}}).then(function(t){++e.numOfVotes,e.$toasted.success("Caption UpVoted!",{theme:"primary",position:"top-right",duration:3e3})}).catch(function(t){"The fields user, picture must make a unique set."===t.response.data.non_field_errors[0]&&e.$toasted.error("You are only allowed to vote once per post.",{theme:"primary",position:"top-right",duration:3e3}),"Signature has expired."===t.response.data.non_field_errors[0]&&e.$toasted.error("You need to be logged in to do that",{theme:"primary",position:"top-right",duration:3e3}),console.log(t.response)})}},mounted:function(){this.numOfVotes=this.votes}},Vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col s3 l2"},[s("button",{on:{click:function(e){t.upVote(t.element_type)}}},[t._m(0),t._v(" "),s("div",{staticClass:"vote-num"},[t._v(t._s(t.numOfVotes))])])])},Pt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"up-icon"},[s("i",{staticClass:"fas fa-caret-circle-up"})])}],Tt={render:Vt,staticRenderFns:Pt},Et=Tt,Nt=s("VU/8"),Lt=p,jt=Nt(Ut,Et,!1,Lt,"data-v-6d978e41",null),Rt=jt.exports,At={props:["cap"],components:{Vote:Rt}},Dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"caption row valign-wrapper"},[s("Vote",{attrs:{votes:t.cap.votes,snap_id:t.cap.picture,cap_id:t.cap.id,element_type:"cap"}}),t._v(" "),s("div",{staticClass:"caption-box col s9 l10"},[t._v('\n    "'+t._s(t.cap.text)+'"\n    '),s("router-link",{attrs:{to:{name:"Profile",params:{id:t.cap.user}}}},[t._v("by "+t._s(t.cap.submitter))])],1)],1)},Ot=[],Yt={render:Dt,staticRenderFns:Ot},It=Yt,Wt=s("VU/8"),Jt=c,zt=Wt(At,It,!1,Jt,"data-v-2ba948e4",null),Ht=zt.exports,Bt={mounted:function(){this.getTopSnap()},props:["snap"],components:{Vote:Rt,Caption:Ht},data:function(){return{topCap:null,newCaption:""}},methods:{getTopSnap:function(){var t=this,e=0;this.snap.usercaps.forEach(function(s){s.votes>=e&&(t.topCap=s,e=s.votes)})},submitCap:function(){var t=this;R.a.post("/api/caps/",{user:this.$store.state.user.id,picture:this.snap.id,text:this.newCaption,votes:0},{headers:{Authorization:"JWT "+this.$store.state.jwt}}).then(function(e){t.snap.usercaps.push(e.data),t.newCaption="",t.topCap||(t.topCap=e.data),t.$toasted.success("Your caption has been added!",{theme:"primary",position:"top-right",duration:3e3})}).catch(function(e){console.log(e.response),t.$toasted.error("Something went wrong!",{theme:"primary",position:"top-right",duration:3e3})})}}},Mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col s3 m2 l1"},[t.snap.votes?s("Vote",{attrs:{votes:t.snap.votes,snap_id:t.snap.id,cap_id:null,element_type:"snap"}}):t._e(),t._v(" "),t.snap.votes?t._e():s("Vote",{attrs:{votes:0,snap_id:t.snap.id,cap_id:null,element_type:"snap"}})],1),t._v(" "),s("div",{staticClass:"each-snap col s9 m10 m11"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col s12 m12 l5"},[s("router-link",{attrs:{to:{name:"SnapShow",params:{id:t.snap.id}}}},[s("img",{attrs:{src:t.snap.cloudinary_url}})]),t._v(" "),s("router-link",{attrs:{to:{name:"Profile",params:{id:t.snap.user}}}},[s("p",{staticClass:"snapped-by"},[s("span",[t._v("Snapped by: "+t._s(t.snap.submitter))])])])],1),t._v(" "),s("div",{staticClass:"col s12 m12 l7"},[s("div",{staticClass:"top-cap-header row"},[t._m(0),t._v(" "),s("div",{staticClass:"col s7"},[this.topCap?s("p",{staticClass:"top-cap-details"},[t._v("\n              Votes: "+t._s(this.topCap.votes)+" |\n              "),this.topCap?s("router-link",{attrs:{to:{name:"Profile",params:{id:this.topCap.user}}}},[t._v("Capped by: "+t._s(this.topCap.submitter))]):t._e()],1):t._e()])]),t._v(" "),s("div",{staticClass:"top-cap-box"},[this.topCap?s("h4",[t._v('"'+t._s(this.topCap.text)+'"')]):s("h4",[t._v("No Captions Yet...")])]),t._v(" "),s("div",{staticClass:"row add-cap"},[t._m(1),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.submitCap(e)}}},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newCaption,expression:"newCaption"}],attrs:{type:"text",placeholder:"Your caption here..."},domProps:{value:t.newCaption},on:{input:function(e){e.target.composing||(t.newCaption=e.target.value)}}}),t._v(" "),s("button",{staticClass:"submit-caption",attrs:{type:"submit"}},[t._v("Submit Caption")])])])]),t._v(" "),t._l(t.snap.usercaps.slice(0,3),function(t){return s("div",[s("Caption",{attrs:{cap:t}})],1)})],2)])])])},Kt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col s5"},[s("h5",[t._v("Top Caption")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"top-cap-header row"},[s("h5",[t._v("Cap This Snap")])])}],Xt={render:Mt,staticRenderFns:Kt},qt=Xt,Qt=s("VU/8"),Zt=l,Gt=Qt(Bt,qt,!1,Zt,"data-v-78c6079d",null),te=Gt.exports,ee={components:{FeedSnap:te},data:function(){return{snaps:[],topCap:null}},methods:{getFeed:function(t){var e=this;"all"===t?R.a.get("/api/snaps/").then(function(t){e.snaps=t.data}):R.a.get("/api/snaps/"+t+"/").then(function(t){e.snaps=t.data})}},mounted:function(){var t=this;R.a.get("/api/snaps/").then(function(e){t.snaps=e.data})}},se=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[t.$store.state.user?s("div",{staticClass:"tabs-row-7"},[s("input",{attrs:{id:"all-tab",type:"radio",name:"tabs",checked:""},on:{click:function(e){t.getFeed("all")}}}),t._v(" "),s("label",{staticClass:"col s7ths",attrs:{for:"all-tab"}},[t._v("All")]),t._v(" "),s("input",{attrs:{id:"feed-tab",type:"radio",name:"tabs"},on:{click:function(e){t.getFeed("friends/"+t.$store.state.user.id)}}}),t._v(" "),s("label",{staticClass:"col s7ths",attrs:{for:"feed-tab"}},[t._v("My Feed")]),t._v(" "),s("input",{attrs:{id:"animals-tab",type:"radio",name:"tabs"},on:{click:function(e){t.getFeed("animals")}}}),t._v(" "),s("label",{staticClass:"col s7ths",attrs:{for:"animals-tab"}},[t._v("Animals")]),t._v(" "),s("input",{attrs:{id:"cats-tab",type:"radio",name:"tabs"},on:{click:function(e){t.getFeed("cats")}}}),t._v(" "),s("label",{staticClass:"col s7ths",attrs:{for:"cats-tab"}},[t._v("Cats")]),t._v(" "),s("input",{attrs:{id:"dogs-tab",type:"radio",name:"tabs"},on:{click:function(e){t.getFeed("dogs")}}}),t._v(" "),s("label",{staticClass:"col s7ths",attrs:{for:"dogs-tab"}},[t._v("Dogs")]),t._v(" "),s("input",{attrs:{id:"sports-tab",type:"radio",name:"tabs"},on:{click:function(e){t.getFeed("sports")}}}),t._v(" "),s("label",{staticClass:"col s7ths",attrs:{for:"sports-tab"}},[t._v("Sports")]),t._v(" "),s("input",{attrs:{id:"hummus-tab",type:"radio",name:"tabs"},on:{click:function(e){t.getFeed("hummus")}}}),t._v(" "),s("label",{staticClass:"col s7ths",attrs:{for:"hummus-tab"}},[t._v("Hummus")])]):s("div",{staticClass:"tabs-row-6"},[s("input",{attrs:{id:"all-tab",type:"radio",name:"tabs",checked:""},on:{click:function(e){t.getFeed("all")}}}),t._v(" "),s("label",{staticClass:"col s7ths",attrs:{for:"all-tab"}},[t._v("All")]),t._v(" "),s("input",{attrs:{id:"animals-tab",type:"radio",name:"tabs"},on:{click:function(e){t.getFeed("animals")}}}),t._v(" "),s("label",{staticClass:"col s7ths",attrs:{for:"animals-tab"}},[t._v("Animals")]),t._v(" "),s("input",{attrs:{id:"cats-tab",type:"radio",name:"tabs"},on:{click:function(e){t.getFeed("cats")}}}),t._v(" "),s("label",{staticClass:"col s7ths",attrs:{for:"cats-tab"}},[t._v("Cats")]),t._v(" "),s("input",{attrs:{id:"dogs-tab",type:"radio",name:"tabs"},on:{click:function(e){t.getFeed("dogs")}}}),t._v(" "),s("label",{staticClass:"col s7ths",attrs:{for:"dogs-tab"}},[t._v("Dogs")]),t._v(" "),s("input",{attrs:{id:"sports-tab",type:"radio",name:"tabs"},on:{click:function(e){t.getFeed("sports")}}}),t._v(" "),s("label",{staticClass:"col s7ths",attrs:{for:"sports-tab"}},[t._v("Sports")]),t._v(" "),s("input",{attrs:{id:"hummus-tab",type:"radio",name:"tabs"},on:{click:function(e){t.getFeed("hummus")}}}),t._v(" "),s("label",{staticClass:"col s7ths",attrs:{for:"hummus-tab"}},[t._v("Hummus")])]),t._v(" "),t._l(t.snaps,function(t){return s("div",{key:t.id,staticClass:"feed-snap-cont"},[s("FeedSnap",{staticClass:"feed-snap",attrs:{snap:t}})],1)})],2)},ae=[],ne={render:se,staticRenderFns:ae},oe=ne,ie=s("VU/8"),re=d,ue=ie(ee,oe,!1,re,"data-v-7b3bc606",null),pe=ue.exports,ce={props:["id"],components:{Caption:Ht},data:function(){return{newCaption:"",url:"",user:"",submitter:"",usercaps:[]}},methods:{submitCap:function(){var t=this;R.a.post("/api/caps/",{user:this.$store.state.user.id,picture:this.id,text:this.newCaption,votes:0},{headers:{Authorization:"JWT "+this.$store.state.jwt}}).then(function(e){t.newCaption="",t.usercaps.push(e.data),t.$toasted.success("Your caption has been added!",{theme:"primary",position:"top-right",duration:3e3})}).catch(function(e){console.log(e.response),t.$toasted.error("Something went wrong",{theme:"primary",position:"top-right",duration:3e3})})}},mounted:function(){var t=this;R.a.get("/api/snaps/"+this.id+"/").then(function(e){t.url=e.data.cloudinary_url,t.user=e.data.user,t.submitter=e.data.submitter,t.usercaps=e.data.usercaps})}},le=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"snap-show row"},[s("div",{staticClass:"col s12 m12 l6"},[s("img",{attrs:{src:t.url}}),t._v(" "),s("p",{staticClass:"snapped-by"},[s("router-link",{attrs:{to:{name:"Profile",params:{id:t.user}}}},[s("span",[t._v("Snapped By: "+t._s(t.submitter))])])],1)]),t._v(" "),s("div",{staticClass:"col s12 m12 l6"},[s("div",{staticClass:"row add-cap"},[t._m(0),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.submitCap(e)}}},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newCaption,expression:"newCaption"}],attrs:{type:"text",placeholder:"Your caption here..."},domProps:{value:t.newCaption},on:{input:function(e){e.target.composing||(t.newCaption=e.target.value)}}}),t._v(" "),s("button",{staticClass:"submit-caption",attrs:{type:"submit"}},[t._v("Submit Caption")])])])]),t._v(" "),t._l(t.usercaps,function(t){return s("div",[s("Caption",{attrs:{cap:t}})],1)})],2)])},de=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"top-cap-header"},[s("h5",[t._v("Cap This Snap")])])}],me={render:le,staticRenderFns:de},ve=me,he=s("VU/8"),fe=m,_e=he(ce,ve,!1,fe,"data-v-576e69f6",null),ge=_e.exports,Ce=s("BO1k"),be=s.n(Ce),we={props:["getUser"],data:function(){return{user:"NO USER",cloudinary:{uploadPreset:"urj196d3",apiKey:"697457472426285",cloudName:"https://api.cloudinary.com/v1_1/dpa63jimp/upload"},thumbs:[]}},methods:{onSubmit:function(){var t=this;this.$modal.hide("update-biopic");var e=new FormData,s=document.getElementById("biopic");e.append("file",s.files[0]),e.append("upload_preset",this.cloudinary.uploadPreset),e.append("tags","gs-vue,gs-vue-uploaded"),R.a.post(this.cloudinary.cloudName,e).then(function(e){t.thumbs.unshift({url:e.data.secure_url}),t.updateBioPic(e.data.secure_url)})},updateBioPic:function(t){var e=this;R.a.put("/api/profile/"+this.$store.state.user.profile.id+"/",{user:this.$store.state.user.id,profile_img:t},{headers:{Authorization:"JWT "+this.$store.state.jwt}}).then(function(t){e.getUser()})},show:function(){this.$modal.show("update-biopic")}}},ye=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.$store.state.user?s("p",[s("button",{staticClass:"header-button",on:{click:t.show}},[t._v("Update Snappie")])]):t._e(),t._v(" "),s("modal",{attrs:{name:"update-biopic"}},[s("div",{staticClass:"main-modal"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("div",{staticClass:"modal-content"},[s("input",{attrs:{type:"file",id:"biopic",name:"biopic",placeholder:"image"}})]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"yellow-btn btn-flat",attrs:{type:"submit"}},[t._v("Update Snappie")])])])])])],1)},$e=[],Se={render:ye,staticRenderFns:$e},ke=Se,Fe=s("VU/8"),xe=v,Ue=Fe(we,ke,!1,xe,"data-v-5cccf4e7",null),Ve=Ue.exports,Pe={props:["getUser"],components:{ChangeProfilePic:Ve}},Te=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ChangeProfilePic",t._b({},"ChangeProfilePic",{getUser:t.getUser},!1))],1)},Ee=[],Ne={render:Te,staticRenderFns:Ee},Le=Ne,je=s("VU/8"),Re=h,Ae=je(Pe,Le,!1,Re,"data-v-b8117000",null),De=Ae.exports,Oe={props:["friend"]},Ye=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"friend-container"},[s("router-link",{attrs:{to:{name:"Profile",params:{id:t.friend.id}}}},[s("img",{attrs:{src:t.friend.profile.profile_img}})]),t._v(" "),s("span",[t._v(t._s(t.friend.username))])],1)},Ie=[],We={render:Ye,staticRenderFns:Ie},Je=We,ze=s("VU/8"),He=f,Be=ze(Oe,Je,!1,He,"data-v-550afa68",null),Me=Be.exports,Ke={mounted:function(){this.getFriendsList()},props:["username","id","getUser"],components:{Following:Me},data:function(){return{friends:[]}},methods:{getFriendsList:function(){var t=this;R.a.get("/api/user/"+this.$route.params.id+"/friends/").then(function(e){t.friends=e.data})}},watch:{$route:function(t,e){e!==t&&this.getFriendsList()}}},Xe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h5",[t._v(t._s(t.username)+" is following")]),t._v(" "),t._l(t.friends,function(t){return s("div",[s("Following",{staticClass:"friend",attrs:{friend:t}})],1)})],2)},qe=[],Qe={render:Xe,staticRenderFns:qe},Ze=Qe,Ge=s("VU/8"),ts=_,es=Ge(Ke,Ze,!1,ts,"data-v-353d20e5",null),ss=es.exports,as={mounted:function(){this.getTopSnap()},props:["snap"],data:function(){return{topCap:null}},methods:{getTopSnap:function(){var t=this,e=0;this.snap.usercaps.forEach(function(s){s.votes>e&&(t.topCap=s,e=s.votes)})}},watch:{snap:function(t,e){this.getTopSnap()}}},ns=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"snap-container"},[s("router-link",{attrs:{to:{name:"SnapShow",params:{id:t.snap.id,url:t.snap.cloudinary_url,user:t.snap.user,usercaps:t.snap.usercaps}}}},[s("img",{attrs:{src:t.snap.cloudinary_url}})]),t._v(" "),s("p",[t._v("pic votes: "+t._s(t.snap.votes))]),t._v(" "),this.topCap?s("p",[t._v('"'+t._s(this.topCap.text)+'"')]):t._e(),t._v(" "),this.topCap?s("p",[t._v("number of votes: "+t._s(this.topCap.votes))]):t._e(),t._v(" "),this.topCap?s("router-link",{attrs:{to:{name:"Profile",params:{id:this.topCap.user}}}},[s("p",[t._v("by "+t._s(this.topCap.submitter))])]):t._e()],1)},os=[],is={render:ns,staticRenderFns:os},rs=is,us=s("VU/8"),ps=g,cs=us(as,rs,!1,ps,"data-v-384ea1c0",null),ls=cs.exports,ds={props:["username","snaps"],components:{Snap:ls}},ms=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h5",[t._v(t._s(t.username)+"'s Snaps")]),t._v(" "),t._l(t.snaps,function(t){return s("div",[s("Snap",{staticClass:"snap",attrs:{snap:t}})],1)})],2)},vs=[],hs={render:ms,staticRenderFns:vs},fs=hs,_s=s("VU/8"),gs=C,Cs=_s(ds,fs,!1,gs,"data-v-5be13f4c",null),bs=Cs.exports,ws={props:["cap"],components:{Vote:Rt}},ys=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cap-container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col s3"},[s("router-link",{attrs:{to:{name:"SnapShow",params:{id:t.cap.picture}}}},[s("img",{attrs:{src:t.cap.picture__cloudinary_url}})])],1),t._v(" "),s("div",{staticClass:"col s9"},[s("div",{staticClass:"row"},[s("p",[t._v(t._s(t.cap.text))])]),t._v(" "),s("div",{staticClass:"row"},[s("p",[t._v("number of votes: "+t._s(t.cap.votes))])])])])])},$s=[],Ss={render:ys,staticRenderFns:$s},ks=Ss,Fs=s("VU/8"),xs=b,Us=Fs(ws,ks,!1,xs,"data-v-ba8d7b90",null),Vs=Us.exports,Ps={mounted:function(){this.getCapsList()},props:["username","id"],components:{Cap:Vs},data:function(){return{usercaps:[]}},methods:{getCapsList:function(){var t=this;R.a.get("/api/user/"+this.$route.params.id+"/caps/").then(function(e){t.usercaps=e.data})}},watch:{$route:function(t,e){e!==t&&this.getCapsList()}}},Ts=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h5",[t._v(t._s(t.username)+"'s Caps")]),t._v(" "),t._l(t.usercaps,function(t){return s("div",[s("Cap",{staticClass:"cap",attrs:{cap:t}})],1)})],2)},Es=[],Ns={render:Ts,staticRenderFns:Es},Ls=Ns,js=s("VU/8"),Rs=w,As=js(Ps,Ls,!1,Rs,"data-v-9b4262fa",null),Ds=As.exports,Os={mounted:function(){this.getUser()},props:["id"],components:{UpdateProfileSection:De,FollowingList:ss,SnapsList:bs,CapsList:Ds},data:function(){return{user:null,totalSnapVotes:0,totalCapVotes:0,isFriend:!1}},methods:{getUser:function(){var t=this;R.a.get("/api/users/"+this.id+"/").then(function(e){t.user=e.data,t.getTotalVotes(),t.checkIsFriend()})},getTotalVotes:function(){var t=this;this.totalCapVotes=0,this.user.usercap_set.forEach(function(e){t.totalCapVotes+=e.votes}),this.totalSnapVotes=0,this.user.picture_set.forEach(function(e){t.totalSnapVotes+=e.votes})},checkIsFriend:function(){if(this.$store.state.user){var t=!0,e=!1,s=void 0;try{for(var a,n=be()(this.$store.state.user.friends);!(t=(a=n.next()).done);t=!0){a.value.friend===parseInt(this.$route.params.id)&&(this.isFriend=!0)}}catch(t){e=!0,s=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw s}}}},toggleFollow:function(){var t=this;R.a.post("/api/friends/"+this.$store.state.user.id+"/"+this.$route.params.id+"/",{},{headers:{Authorization:"JWT "+this.$store.state.jwt}}).then(function(e){!0!==t.isFriend?t.$toasted.success("Now Following",{theme:"primary",position:"top-right",duration:3e3}):t.$toasted.show("Unfollowed",{theme:"primary",position:"top-right",duration:3e3}),t.$store.state.user=e.data,localStorage.u=e.data,t.isFriend=!t.isFriend})}},watch:{$route:function(t,e){e!==t&&this.getUser()}}},Ys=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"profile-page"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col s5"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col s12"},[null!==t.user?s("img",{attrs:{src:t.user.profile.profile_img}}):t._e()])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col s12"},[t.$store.state.user&&parseInt(this.$route.params.id)===this.$store.state.user.id?s("UpdateProfileSection",t._b({},"UpdateProfileSection",{getUser:t.getUser},!1)):t._e()],1)])]),t._v(" "),s("div",{staticClass:"col s7"},[t.user?s("h2",[t._v(t._s(t.user.username))]):t._e(),t._v(" "),t.$store.state.user&&t.$store.state.user.id!==this.$route.params.id?s("button",{on:{click:t.toggleFollow}},[this.isFriend?s("span",[t._v("Unfollow")]):s("span",[t._v("Follow")])]):t._e(),t._v(" "),s("h4",[t._v("Snap Points")]),t._v(" "),s("p",[t._v(t._s(this.totalSnapVotes))]),t._v(" "),s("h4",[t._v("Cap Points")]),t._v(" "),s("p",[t._v(t._s(this.totalCapVotes))])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col s4"},[t.user?s("FollowingList",t._b({},"FollowingList",{id:t.user.id,username:t.user.username},!1)):t._e()],1),t._v(" "),s("div",{staticClass:"col s4"},[t.user?s("SnapsList",{attrs:{snaps:this.user.picture_set,username:this.user.username}}):t._e()],1),t._v(" "),s("div",{staticClass:"col s4"},[t.user?s("CapsList",{attrs:{id:this.user.id,username:this.user.username}}):t._e()],1)])])},Is=[],Ws={render:Ys,staticRenderFns:Is},Js=Ws,zs=s("VU/8"),Hs=y,Bs=zs(Os,Js,!1,Hs,"data-v-6bd998d7",null),Ms=Bs.exports;k.a.use(xt.a);var Ks=new xt.a({routes:[{path:"/",name:"Home",component:pe},{path:"/snaps/:id",name:"SnapShow",component:ge,props:!0},{path:"/profile/:id",name:"Profile",component:Ms,props:!0}]}),Xs=s("Rf8U"),qs=s.n(Xs),Qs=s("ytdl"),Zs=s.n(Qs),Gs=s("NYxO"),ta=s("rifk"),ea=s.n(ta),sa=s("IZMb"),aa=s.n(sa);k.a.use(aa.a),k.a.use(Gs.a),k.a.use(qs.a,R.a),k.a.use(ea.a,{dialog:!0});var na=new Gs.a.Store({state:{jwt:localStorage.getItem("t"),user:localStorage.getItem("u"),endpoints:{obtainJWT:"http://localhost:8000/auth/obtain_token/",refreshJWT:"http://localhost:8000/auth/refresh_token/"}},mutations:{updateToken:function(t,e){localStorage.setItem("t",e.token),localStorage.setItem("u",S()(e.user)),t.jwt=e.token,t.user=e.user},removeToken:function(t){localStorage.removeItem("t"),localStorage.removeItem("u"),t.jwt=null,t.user=null}},actions:{obtainToken:function(t,e){var s=this,a={username:e[0],password:e[1]};R.a.post(this.state.endpoints.obtainJWT,a).then(function(t){s.commit("updateToken",{token:t.data.token,user:t.data.user}),k.a.toasted.show("Logged In",{theme:"primary",position:"top-right",duration:3e3})}).catch(function(t){console.log(t.response),"Unable to log in with provided credentials."===t.response.data.non_field_errors[0]?k.a.toasted.error("Your username and password don't match",{theme:"primary",position:"top-right",duration:3e3}):k.a.toasted.error(t.response.data,{theme:"primary",position:"top-right",duration:3e3})})},refreshToken:function(){var t=this,e={token:this.state.jwt};R.a.post(this.state.endpoints.refreshJWT,e).then(function(e){t.commit("updateToken",{token:e.data.token,user:e.data.user})}).catch(function(t){console.log(t)})},inspectToken:function(){var t=this.state.jwt;if(t){var e=Zs()(t),s=e.exp,a=e.origIat;s-Date.now()/1e3<1800&&Date.now()/1e3-a<628200?this.dispatch("refreshToken"):Date.now()}},logout:function(){this.commit("removeToken"),k.a.toasted.show("Logged Out",{theme:"primary",position:"top-right",duration:3e3})}}});k.a.config.productionTip=!1,k.a.component("Nav",gt),k.a.component("Footer",Ft),new k.a({el:"#app",router:Ks,store:na,template:"<App/>",components:{App:L}})},O8b8:function(t,e){},TNXy:function(t,e){},TjtT:function(t,e){},WWwO:function(t,e){},biDQ:function(t,e){},g4oD:function(t,e){},gNUi:function(t,e){},iMzD:function(t,e){},l3D2:function(t,e){},lULF:function(t,e){},"pVY+":function(t,e){},rYRr:function(t,e){},sL98:function(t,e){},"vX+Y":function(t,e){},x5AP:function(t,e){},xPla:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.2b1c2c8fb14d6809aa3a.js.map